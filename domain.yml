version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - user_details_intent
  - appointment_intent
  - login_form_intent
  - register_form_intent
  - delete_appointment_intent
  - book_appointment_intent
  - get_appointment_intent
  - update_appointment_intent

entities:
  - email
  - name
  - phno
  - gender
  - otp
  - menu_selection
  - time
  - which_doctor
  - select_menu
  - select_appointment
  - appointment_time
  - appointment_date
  - new_which_doctor
  - new_appointment_time
  - new_appointment_date

slots:
  email:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: email
            active_loop: register_form
          - requested_slot: email
            active_loop: login_form
        
  name:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: name
            active_loop: register_form
      
  phno:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: phno
            active_loop: register_form

  gender:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: gender
        intent: user_details_intent
        
  otp:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: otp
            active_loop: register_form
          - requested_slot: otp
            active_loop: login_form
            
  is_otp_true:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
      
  generated_otp:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
  
  confirm_details:
    type: bool
    influence_conversation: false
    mappings:
      - type: from_intent
        intent: affirm
        value: yes
      - type: from_intent
        intent: deny
        value: no
      
  which_doctor:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: which_doctor
        conditions:
          - requested_slot: which_doctor
            active_loop: book_appointment_form

  appointment_date:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: appointment_date
            active_loop: book_appointment_form
            
  appointment_time:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: appointment_time
        conditions:
          - requested_slot: appointment_time
            active_loop: book_appointment_form
   
  select_menu:
    type: text
    influence_conversation: false
    mappings:
     - type: from_entity
       entity: select_menu
  
  select_appointment:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: select_appointment
        
  appointment_details:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: appointment_details
            active_loop: get_appointment_form

  delete_reason:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: delete_reason
            active_loop: delete_appointment_form

  delete_otp:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: delete_otp
            active_loop: delete_appointment_form

  is_doc_full:
    type: bool
    influence_conversation: false
    mappings:
      - type: custom
          
  fully_booked_docs:
    type: list
    influence_conversation: false
    mappings:
      - type: custom
  
  update_reason:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: update_reason
            active_loop: update_appointment_form
  
  new_which_doctor:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: new_which_doctor
        conditions:
          - requested_slot: new_which_doctor
            active_loop: update_appointment_form
  
  new_appointment_date:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: new_appointment_date
            active_loop: update_appointment_form
  
  new_appointment_time:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: new_appointment_time
        conditions:
          - requested_slot: new_appointment_time
            active_loop: update_appointment_form
            
  update_otp:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: update_otp
            active_loop: update_appointment_form

forms:
  login_form:
    required_slots:
      - email
      - otp
      
  register_form:
    required_slots:
      - name
      - email
      - phno
      - gender
      - otp

  book_appointment_form:
    required_slots:
      - which_doctor
      - appointment_date
      - appointment_time

  get_appointment_form:
    required_slots:
      - select_appointment
      - select_menu

  delete_appointment_form:
    required_slots:
      - select_appointment
      - delete_reason
      - delete_otp

  update_appointment_form:
    required_slots:
      - select_appointment
      - update_reason
      - new_which_doctor
      - new_appointment_date
      - new_appointment_time
      - update_otp

actions:
  - action_greet
  - action_ask_otp
  - action_submit_login_form
  - action_submit_register_form
  - validate_login_form
  - validate_register_form
  - action_ask_which_doctor
  - action_ask_appointment_date
  - action_ask_appointment_time
  - action_ask_appointment_details
  - action_ask_select_menu
  - action_ask_select_appointment
  - validate_get_appointment_form
  - validate_book_appointment_form
  - action_ask_delete_reason
  - action_ask_delete_otp
  - action_submit_delete_appointment_form
  - action_submit_book_appointment_form
  - validate_delete_appointment_form
  - action_submit_get_appointment_form
  - action_ask_update_reason
  - action_ask_new_which_doctor
  - action_ask_new_appointment_date
  - action_ask_new_appointment_time
  - action_ask_update_otp
  - action_submit_update_appointment_form
  - validate_update_appointment_form

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
