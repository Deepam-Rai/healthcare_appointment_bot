version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - user_details_intent
  - appointment_intent
  - login_form_intent
  - register_form_intent
  - delete_appointment_intent
  - book_appointment_intent
  - get_appointment_intent
  - update_appointment_intent

entities:
  - email
  - name
  - phno
  - gender
  - otp
  - menu_selection

slots:
  email:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: email
            active_loop: register_form
          - requested_slot: email
            active_loop: login_form
        
  name:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: name
            active_loop: register_form
      
  phno:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: phno
            active_loop: register_form

  gender:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: gender
        intent: user_details_intent
        
  otp:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - requested_slot: otp
            active_loop: register_form
          - requested_slot: otp
            active_loop: login_form
            
  is_otp_true:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
      
  generated_otp:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
  
  confirm_details:
    type: bool
    influence_conversation: false
    mappings:
      - type: from_intent
        intent: affirm
        value: yes
      - type: from_intent
        intent: deny
        value: no
      
  which_doctor:
    type: text
    influence_conversation: false
    
  
forms:
  login_form:
    required_slots:
      - email
      - otp
      
  register_form:
    required_slots:
      - name
      - email
      - phno
      - gender
      - otp

  book_appointment_form:
    required_slots:
      - which_doctor
      - appointment_date
      - appointment_time

actions:
  - action_greet
  - action_ask_otp
  - action_submit_login_form
  - action_submit_register_form
  - validate_login_form
  - validate_register_form
  - action_ask_which_doctor
  - action_ask_appointment_date
  - action_ask_appointment_time
#  - validate_book_appointment_form

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
